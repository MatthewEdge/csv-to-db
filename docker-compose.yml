version: '3.7'

services:
    knock:
      build:
        context: .
      container_name: knock
      hostname: knock
      environment:
        DB_HOST: db
        DB_PORT: 5432
        DB_USER: postgres
        DB_PASS: example
      ports:
          - "8080:8080"
      depends_on:
          - mockdb

    mockdb:
        image: postgres
        restart: always
        container_name: db
        hostname: db
        environment:
            POSTGRES_PASSWORD: example
        ports:
            - "5432:5432"

